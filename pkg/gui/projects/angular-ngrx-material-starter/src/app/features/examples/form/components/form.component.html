<div class="container mt-4">
  <form (ngSubmit)="onSubmit()" [formGroup]="form" novalidate>
    <div class="row">
      <div class="col-md-6 mb-3" *ngFor="let field of fields">
        <mat-form-field
          appearance="fill"
          class="w-100"
          *ngIf="field.type !== 'select'"
        >
          <mat-label>{{ field.label }}</mat-label>
          <input
          matInput
          name="{{field.name}}"
            [formControlName]="field.name"
            [readonly]="field.isReadonly"
            type="number"
            *ngIf="field.type === 'number'"
          />
          <input
            matInput
            name="{{field.name}}"
            [formControlName]="field.name"
            [readonly]="field.isReadonly"
            type="text"
            *ngIf="field.type === 'text'"
          />
          <input
            matInput
            name="{{field.name}}"
            [formControlName]="field.name"
            [readonly]="field.isReadonly"
            type="email"
            *ngIf="field.type === 'email'"
          />
          <input
            matInput
            name="{{field.name}}"
            [formControlName]="field.name"
            [readonly]="field.isReadonly"
            type="url"
            *ngIf="field.type === 'url'"
          />
          <mat-error *ngIf="form.get(field.name)?.['invalid']">{{
            field.error
          }}</mat-error>
        </mat-form-field>

        <mat-form-field
          appearance="fill"
          class="w-100"
          *ngIf="field.type === 'select'"
        >
          <mat-label>{{ field.label }}</mat-label>
          <mat-select
            [attr.name]="field.name"
            [formControlName]="field.name"
            [disabled]="field.isReadonly"
          >
            <mat-option
              *ngFor="let option of field.options"
              [value]="option.value"
            >
              {{ option.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="form.get(field.name)?.['invalid']">{{
            field.error
          }}</mat-error>
        </mat-form-field>
      </div>
    </div>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="form.invalid"
    >
      {{ 'sdbg.examples.form.save' | translate }}
    </button>
    <pre>{{ getAllErrors(form) | json }}</pre>
  </form>
</div>
